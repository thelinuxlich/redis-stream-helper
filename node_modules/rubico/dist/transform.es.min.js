/**
 * rubico v1.8.1
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */
const isPromise=r=>null!=r&&"function"==typeof r.then,__=Symbol.for("placeholder"),curry3ResolveArg0=(r,e,n)=>function(t){return r(t,e,n)},curry3ResolveArg1=(r,e,n)=>function(t){return r(e,t,n)},curry3ResolveArg2=(r,e,n)=>function(t){return r(e,n,t)},curry3=function(r,e,n,t){return e==__?curry3ResolveArg0(r,n,t):n==__?curry3ResolveArg1(r,e,t):curry3ResolveArg2(r,e,n)},isArray=Array.isArray,isBinary=ArrayBuffer.isView,callPropUnary=(r,e,n)=>r[e](n),curry2ResolveArg0=(r,e)=>function(n){return r(n,e)},curry2ResolveArg1=(r,e)=>function(n){return r(e,n)},curry2=function(r,e,n){return e==__?curry2ResolveArg0(r,n):curry2ResolveArg1(r,e)},always=r=>function(){return r},noop=function(){},add=(r,e)=>r+e,objectValues=Object.values,objectProto=Object.prototype,nativeObjectToString=objectProto.toString,objectToString=r=>nativeObjectToString.call(r),generatorFunctionTag="[object GeneratorFunction]",isGeneratorFunction=r=>objectToString(r)==generatorFunctionTag,asyncGeneratorFunctionTag="[object AsyncGeneratorFunction]",isAsyncGeneratorFunction=r=>objectToString(r)==asyncGeneratorFunctionTag,iteratorReduceAsync=async function(r,e,n){let t=r.next();if(t.done)return n;for(;!t.done;)n=e(n,t.value),isPromise(n)&&(n=await n),t=r.next();return n},iteratorReduce=function(r,e,n){let t=r.next();if(t.done)return n;for(void 0===n&&(n=t.value,t=r.next());!t.done;){if(n=e(n,t.value),isPromise(n))return n.then(curry3(iteratorReduceAsync,r,e,__));t=r.next()}return n},asyncIteratorReduce=async function(r,e,n){let t=await r.next();if(t.done)return n;for(void 0===n&&(n=t.value,t=await r.next());!t.done;)n=await e(n,t.value),t=await r.next();return n},symbolIterator=Symbol.iterator,symbolAsyncIterator=Symbol.asyncIterator,curryArgs3ResolveArgs0=(r,e,n)=>function(...t){return r(t,e,n)},curryArgs3ResolveArgs1=(r,e,n)=>function(...t){return r(e,t,n)},curryArgs3ResolveArgs2=(r,e,n)=>function(...t){return r(e,n,t)},curryArgs3=function(r,e,n,t){return e==__?curryArgs3ResolveArgs0(r,n,t):n==__?curryArgs3ResolveArgs1(r,e,t):curryArgs3ResolveArgs2(r,e,n)},curry4ResolveArg0=(r,e,n,t)=>function(o){return r(o,e,n,t)},curry4ResolveArg1=(r,e,n,t)=>function(o){return r(e,o,n,t)},curry4ResolveArg2=(r,e,n,t)=>function(o){return r(e,n,o,t)},curry4ResolveArg3=(r,e,n,t)=>function(o){return r(e,n,t,o)},curry4=function(r,e,n,t,o){return e==__?curry4ResolveArg0(r,n,t,o):n==__?curry4ResolveArg1(r,e,t,o):t==__?curry4ResolveArg2(r,e,n,o):curry4ResolveArg3(r,e,n,t)},arrayReduceAsync=async function(r,e,n,t){const o=r.length;for(;++t<o;)n=e(n,r[t],t,r),isPromise(n)&&(n=await n);return n},arrayReduce=function(r,e,n){const t=r.length;let o=-1;for(void 0===n&&(n=r[++o]);++o<t;)if(n=e(n,r[o],o,r),isPromise(n))return n.then(curry4(arrayReduceAsync,r,e,__,o));return n},curry5ResolveArg0=(r,e,n,t,o)=>function(c){return r(c,e,n,t,o)},curry5ResolveArg1=(r,e,n,t,o)=>function(c){return r(e,c,n,t,o)},curry5ResolveArg2=(r,e,n,t,o)=>function(c){return r(e,n,c,t,o)},curry5ResolveArg3=(r,e,n,t,o)=>function(c){return r(e,n,t,c,o)},curry5ResolveArg4=(r,e,n,t,o)=>function(c){return r(e,n,t,o,c)},curry5=function(r,e,n,t,o,c){return e==__?curry5ResolveArg0(r,n,t,o,c):n==__?curry5ResolveArg1(r,e,t,o,c):t==__?curry5ResolveArg2(r,e,n,o,c):o==__?curry5ResolveArg3(r,e,n,t,c):curry5ResolveArg4(r,e,n,t,o)},objectKeys=Object.keys,objectGetFirstKey=function(r){for(const e in r)return e},objectReduceAsync=async function(r,e,n,t,o){const c=t.length;for(;++o<c;){const c=t[o];n=e(n,r[c],c,r),isPromise(n)&&(n=await n)}return n},objectReduce=function(r,e,n){const t=objectKeys(r),o=t.length;let c=-1;for(void 0===n&&(n=r[t[++c]]);++c<o;){const o=t[c];if(n=e(n,r[o],o,r),isPromise(n))return n.then((u=objectReduceAsync,s=e,a=__,y=t,f=c,(i=r)==__?curry5ResolveArg0(u,s,a,y,f):s==__?curry5ResolveArg1(u,i,a,y,f):a==__?curry5ResolveArg2(u,i,s,y,f):y==__?curry5ResolveArg3(u,i,s,a,f):curry5ResolveArg4(u,i,s,a,y)))}var u,i,s,a,y,f;return n},mapReduceAsync=async function(r,e,n,t){for(const[o,c]of t)n=e(n,c,o,r),isPromise(n)&&(n=await n);return n},mapReduce=function(r,e,n){const t=r.entries();if(void 0===n){const r=t.next();if(r.done)return n;n=r.value[1]}for(const[o,c]of t)if(n=e(n,c,o,r),isPromise(n))return n.then(curry4(mapReduceAsync,r,e,__,t));return n},funcConcatSync=(r,e)=>function(...n){return e(r(...n))},generatorFunctionReduce=(r,e,n)=>funcConcatSync(r,curry3(iteratorReduce,__,e,n)),asyncGeneratorFunctionReduce=(r,e,n)=>funcConcatSync(r,curry3(asyncIteratorReduce,__,e,n)),reducerConcat=(r,e)=>function(n,t){const o=r(n,t);return isPromise(o)?o.then(curry2(e,__,t)):e(o,t)},genericReduce=function(r,e,n){const t=r[0];return isArray(t)?arrayReduce(t,e,n):"function"==typeof t?objectToString(t)==generatorFunctionTag?generatorFunctionReduce(t,e,n):isAsyncGeneratorFunction(t)?asyncGeneratorFunctionReduce(t,e,n):(o=genericReduce,c=__,u=1==r.length?reducerConcat(e,t):r.reduce(reducerConcat,e),i=n,c==__?curryArgs3ResolveArgs0(o,u,i):u==__?curryArgs3ResolveArgs1(o,c,i):curryArgs3ResolveArgs2(o,c,u)):null==t?void 0===n?curry2(e,t,__):e(n,t):t.constructor==Map?mapReduce(t,e,n):"function"==typeof t[symbolIterator]?iteratorReduce(t[symbolIterator](),e,n):"function"==typeof t[symbolAsyncIterator]?asyncIteratorReduce(t[symbolAsyncIterator](),e,n):"function"==typeof t.reduce?t.reduce(e,n):"function"==typeof t.chain?t.chain(curry2(e,n,__)):"function"==typeof t.flatMap?t.flatMap(curry2(e,n,__)):t.constructor==Object?objectReduce(t,e,n):void 0===n?curry2(e,t,__):e(n,t);var o,c,u,i},objectAssign=Object.assign,isArrayLike=function(r){return null!=r&&r.length>0},_arrayExtend=function(r,e){const n=r.length,t=e.length;let o=-1;for(;++o<t;)r[n+o]=e[o];return r},arrayExtend=function(r,e){return null!=(n=e)&&n.length>0?_arrayExtend(r,e):(r.push(e),r);var n},globalThisHasBuffer="function"==typeof Buffer,bufferAlloc=globalThisHasBuffer?Buffer.alloc:noop,_binaryExtend=function(r,e){const n=r.length,t=globalThisHasBuffer&&r.constructor==Buffer?bufferAlloc(n+e.length):new r.constructor(n+e.length);return t.set(r),t.set(e,n),t},binaryExtend=function(r,e){return isArray(e)||isBinary(e)?_binaryExtend(r,e):_binaryExtend(r,[e])},thunkify1=(r,e)=>function(){return r(e)},isNodeReadStream=r=>null!=r&&"function"==typeof r.pipe,__streamWrite=r=>function(e,n,t){return r.write(e,n,t),r},_streamExtendExecutor=(r,e)=>function(n,t){var o,c;e.on("data",__streamWrite(r)),e.on("end",(o=n,c=r,function(){return o(c)})),e.on("error",t)},_streamExtend=(r,e)=>new Promise(_streamExtendExecutor(r,e)),streamExtend=function(r,e){return null!=(n=e)&&"function"==typeof n.pipe?_streamExtend(r,e):(r.write(e),r);var n},setExtend=function(r,e){if(null!=e&&e.constructor==Set){for(const n of e)r.add(n);return r}return r.add(e)},callConcat=function(r,e){return r.concat(e)},identityTransform=function(r,e,n){const t=genericReduce(r,e(noop),null);return isPromise(t)?t.then((o=n,function(){return o})):n;var o},genericTransform=function(r,e,n){if(isArray(n))return genericReduce(r,e(arrayExtend),n);if(isBinary(n)){const t=genericReduce(r,e(arrayExtend),[]);return isPromise(t)?t.then(curry2(binaryExtend,n,__)):binaryExtend(n,t)}if(null==n)return identityTransform(r,e,n);const t=n.constructor;return"string"==typeof n||t==String?genericReduce(r,e(add),n):"function"==typeof n.concat?genericReduce(r,e(callConcat),n):"function"==typeof n.write?genericReduce(r,e(streamExtend),n):t==Set?genericReduce(r,e(setExtend),n):t==Object?genericReduce(r,e(objectAssign),n):identityTransform(r,e,n)},transform=function(r,e){return"function"==typeof e?function(...n){const t=e(...n);return isPromise(t)?t.then(curry3(genericTransform,n,r,__)):genericTransform(n,r,t)}:function(...n){return genericTransform(n,r,e)}};export default transform;
