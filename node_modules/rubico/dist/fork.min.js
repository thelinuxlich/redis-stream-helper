/**
 * rubico v1.8.1
 * https://github.com/a-synchronous/rubico
 * (c) 2019-2021 Richard Tong
 * rubico may be freely distributed under the MIT license.
 */

!function(n,t){"object"==typeof module?module.exports=t:"function"==typeof define?define((()=>t)):n.fork=t}("object"==typeof globalThis?globalThis:this,function(){"use strict";const n=Array.isArray,t=n=>null!=n&&"function"==typeof n.then,r=Promise.all.bind(Promise),o=Symbol.for("placeholder"),e=function(n,t,r,e){return t==o?((n,t,r)=>function(o){return n(o,t,r)})(n,r,e):r==o?((n,t,r)=>function(o){return n(t,o,r)})(n,t,e):((n,t,r)=>function(o){return n(t,r,o)})(n,t,r)},u=function(n,t,r){return n[t]=r,n},c=n=>function(...c){const i={},f=[];for(const r in n){const s=n[r](...c);t(s)?f.push(s.then(e(u,i,r,o))):i[r]=s}return 0==f.length?i:r(f).then((s=i,function(){return s}));var s},i=(n,r)=>function(...o){const e=n(...o);return t(e)?e.then(r):r(e)},f=async function(n,r,o,e){const u=n.length;for(;++e<u;){const u=n[e](...r);o[e]=t(u)?await u:u}return o},s=o=>n(o)?(n=>function(...o){const e=n.length,u=Array(e);let c=-1,i=!1;for(;++c<e;){const r=n[c](...o);t(r)&&(i=!0),u[c]=r}return i?r(u):u})(o):c(o);return s.series=r=>n(r)?(n=>function(...r){const c=n.length,s=[];let l=-1;for(;++l<c;){const c=n[l](...r);if(t(c))return c.then(i(e(u,s,l,o),(h=f,y=r,p=o,b=l,(a=n)==o?((n,t,r,o)=>function(e){return n(e,t,r,o)})(h,y,p,b):y==o?((n,t,r,o)=>function(e){return n(t,e,r,o)})(h,a,p,b):p==o?((n,t,r,o)=>function(e){return n(t,r,e,o)})(h,a,y,b):((n,t,r,o)=>function(e){return n(t,r,o,e)})(h,a,y,p))));s[l]=c}var h,a,y,p,b;return s})(r):c(r),s}());
